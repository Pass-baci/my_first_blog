(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcc396f6"],{"0546":function(e,r,t){},"52ca":function(e,r,t){"use strict";t("0546")},a782:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("span",{staticClass:"sp"},[e._v("欢迎来到用户管理页面")]),t("a-card",[t("a-row",[t("a-col",{attrs:{span:6}},[t("a-input-search",{staticStyle:{width:"100%"},attrs:{placeholder:"输入用户进行查找",allowClear:""},on:{search:e.getUserList},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}})],1),t("a-col",{attrs:{span:4}},[t("a-button",{staticStyle:{"margin-left":"8%"},attrs:{type:"primary"},on:{click:function(r){e.addUservisible=!0}}},[e._v("新增")])],1)],1),t("a-table",{attrs:{rowKey:"ID",columns:e.columns,pagination:e.paginationOption,dataSource:e.userlist,bordered:""},scopedSlots:e._u([{key:"role",fn:function(r){return t("span",{},[e._v(e._s(1===r?"管理员":"阅读者"))])}},{key:"action",fn:function(r){return[t("div",{staticClass:"actionSlot"},[t("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.editUser(r.ID)}}},[e._v("编辑")]),t("a-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteUser(r.ID)}}},[e._v("删除")])],1)]}}])})],1),t("a-modal",{attrs:{closable:"",destroyOnclose:"",title:"新增用户",visible:e.addUservisible},on:{ok:e.addUserOk,cancel:e.addUserCancel}},[t("a-form-model",{ref:"addUserRef",attrs:{model:e.userInfo,rules:e.userRules}},[t("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[t("a-input",{model:{value:e.userInfo.username,callback:function(r){e.$set(e.userInfo,"username",r)},expression:"userInfo.username"}})],1),t("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[t("a-input-password",{model:{value:e.userInfo.password,callback:function(r){e.$set(e.userInfo,"password",r)},expression:"userInfo.password"}})],1),t("a-form-model-item",{attrs:{label:"确认密码",prop:"repassword"}},[t("a-input-password",{model:{value:e.userInfo.repassword,callback:function(r){e.$set(e.userInfo,"repassword",r)},expression:"userInfo.repassword"}})],1),t("a-form-model-item",{attrs:{label:"是否为管理员",prop:"role"}},[t("a-select",{staticStyle:{},attrs:{defaultValue:"2"},on:{change:e.adminChange}},[t("a-select-option",{key:"1",attrs:{value:"1"}},[e._v("是")]),t("a-select-option",{key:"2",attrs:{value:"2"}},[e._v("否")])],1)],1)],1)],1),t("a-modal",{attrs:{closable:"",destroyOnclose:"",title:"编辑用户",visible:e.editUservisible},on:{ok:e.editUserOk,cancel:e.editUserCancel}},[t("a-form-model",{ref:"editUserRef",attrs:{model:e.userInfo,rules:e.editRules}},[t("a-form-model-item",{attrs:{label:"用户名",prop:"username"}},[t("a-input",{model:{value:e.userInfo.username,callback:function(r){e.$set(e.userInfo,"username",r)},expression:"userInfo.username"}})],1),t("a-form-model-item",{attrs:{label:"是否为管理员",prop:"role"}},[t("a-select",{staticStyle:{},attrs:{defaultValue:"2"},on:{change:e.adminChange}},[t("a-select-option",{key:"1",attrs:{value:"1"}},[e._v("是")]),t("a-select-option",{key:"2",attrs:{value:"2"}},[e._v("否")])],1)],1)],1)],1)],1)},n=[],s=(t("a9e3"),t("96cf"),t("1da1"));function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function i(e){if(Array.isArray(e))return o(e)}t("a4d3"),t("e01a"),t("d28b"),t("a630e"),t("d3b7"),t("3ca3"),t("ddb0");function u(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}t("fb6a"),t("b0c0"),t("25f0");function c(e,r){if(e){if("string"===typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,r):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return i(e)||u(e)||c(e)||l()}var f=[{title:"ID",dataIndex:"ID",width:"5%",key:"ID",align:"center"},{title:"用户名",dataIndex:"username",width:"20%",key:"username",align:"center"},{title:"权限",dataIndex:"role",width:"10%",key:"role",scopedSlots:{customRender:"role"},align:"center"},{title:"操作",width:"10%",key:"action",scopedSlots:{customRender:"action"},align:"center"}],p={data:function(){var e=this;return{paginationOption:{pagSizeOptions:["5","5","10"],defaultCurrent:1,defaultPageSize:10,total:0,showSizeChanger:!0,showTotal:function(e){return"共".concat(e,"条")},onchage:function(r,t){e.paginationOption.defaultCurrent=r,e.paginationOption.defaultPageSize=t},onshowSizeChange:function(r,t){e.paginationOption.defaultCurrent=r,e.paginationOption.defaultPageSize=t}},userInfo:{id:0,username:"",password:"",repassword:"",role:2},userlist:[],userRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:12,message:"用户名长度不正确",trigger:"blur"}],password:[{validator:function(r,t,a){""===e.userInfo.password&&a(new Error("请输入密码")),d(e.userInfo.password).length<6||d(e.userInfo.password).length>20?a(new Error("密码格式错误")):a()},trigger:"blur"}],repassword:[{validator:function(r,t,a){""===e.userInfo.repassword&&a(new Error("请输入密码")),e.userInfo.repassword!==e.userInfo.password?a(new Error("密码不一致，请重新输入")):a()},trigger:"blur"}]},editRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:12,message:"用户名长度不正确",trigger:"blur"}]},columns:f,username:"",addUservisible:!1,editUservisible:!1}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("users",{params:{username:e.username,pageSize:e.paginationOption.defaultPageSize,pagenum:e.paginationOption.defaultCurrent}});case 2:if(t=r.sent,a=t.data,200===a.status){r.next=6;break}return r.abrupt("return",e.$message.console.error(a.message));case 6:e.userlist=a.data,e.paginationOption.total=a.total;case 8:case"end":return r.stop()}}),r)})))()},deleteUser:function(e){var r=this;this.$confirm({title:"确定要删除该用户吗？",content:"一旦删除，无法恢复！",onOk:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$http.delete("/users/".concat(e));case 2:if(a=t.sent,200===a.status){t.next=5;break}return t.abrupt("return",r.$message.console.error(a.message));case 5:r.$message.success("删除成功"),r.getUserList();case 7:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}(),onCancel:function(){r.$message.info("已取消！")}})},addUserOk:function(){var e=this;this.$refs.addUserRef.validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(t){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",e.$message.error("参数不符合要求，请重新输入"));case 2:return r.next=4,e.$http.post("users/add",{username:e.userInfo.username,password:e.userInfo.password,role:e.userInfo.role});case 4:if(a=r.sent,n=a.data,200===n.status){r.next=8;break}return r.abrupt("return",e.$message.error(n.message));case 8:e.$message.success("添加用户成功！"),e.addUservisible=!1,e.getUserList();case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},addUserCancel:function(){this.$refs.addUserRef.resetFields(),this.addUservisible=!1},adminChange:function(e){this.userInfo.role=Number(e)},editUser:function(e){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.editUservisible=!0,t.next=3,r.$http.get("users/".concat(e));case 3:a=t.sent,n=a.data,r.userInfo.username=n.data.username,r.userInfo.id=e;case 7:case"end":return t.stop()}}),t)})))()},editUserOk:function(){var e=this;this.$refs.editUserRef.validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(t){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",e.$message.error("参数不符合要求，请重新输入"));case 2:return r.next=4,e.$http.put("users/".concat(e.userInfo.id),{username:e.userInfo.username,role:e.userInfo.role});case 4:if(a=r.sent,n=a.data,200===n.status){r.next=8;break}return r.abrupt("return",e.$message.error(n.message));case 8:e.$message.success("更新用户成功！"),e.editUservisible=!1,e.getUserList();case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},editUserCancel:function(){this.$refs.editUserRef.resetFields(),this.editUservisible=!1,this.$message.info("已取消！")}}},m=p,g=(t("52ca"),t("2877")),b=Object(g["a"])(m,a,n,!1,null,"711d0c3e",null);r["default"]=b.exports}}]);
//# sourceMappingURL=chunk-bcc396f6.0b207ce2.js.map